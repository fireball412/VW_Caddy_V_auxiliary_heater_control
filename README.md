https://www.youtube.com/watch?v=mSVitiTF-Ng

English

Background: This project is about the automation of the auxiliary heater of a Volkswagen Caddy V (2024) for the purpose of sleeping in the car. 

Issue: The car only allows programming of one heating  activation during night which may yield too low temperatures.

Solution approach: Measurement of the temperature by a sensor (DS18B20) and activating the remote control of the auxiliary heater by a servo.

The code is written in Arduino for ESP32S3. The temperature sensor is connected to pin 4 and supplied by the 3.3V generated by the LDO of the ESP Development board. The servo is connected to pin 5 and supplied by input voltage of the LDO which is either provided by the USB during debugging or externally via 5Vin. I used 4 cells of NiMh (Eneloop) for operation. The average current consumption is around 70mA.

The 3D printed parts are provided in a project. The parts are made for the remote control of a Caddy V (2024) and a standard servo (HK15138). The servo positions for neutral and activation must be determined iteratively. The provided program “servo_set” can be useful for this purpose.

The main code measures the temperature and compares with TEMP_THRESHOLD_LOW_C. If the temperature is too low it activates the servo for the duration of SERVO_HOLD_DURATION_MS. The auxiliary heater runs for 20 minutes. Depending on the temperature the car may cool down fast. Too avoid exceeding the battery of the car (that supplies the auxiliary heater) the heater is not activated before SERVO_COOLDOWN_MS passed by. Activation more often than every 2h is not recommended. 

The LED of the development board indicates the status. Blue/red means temperature is below/above TEMP_THRESHOLD_LOW_C. Yellow means that the temperature measurements results an error

Deutsch

Hintergrund: Dieses Projekt befasst sich mit der Automatisierung der Zusatzheizung eines Volkswagen Caddy V (2024) mit dem Ziel, im Auto übernachten zu können.

Problemstellung: Das Fahrzeug erlaubt nur eine Heizungsaktivierung während der Nacht, was zu zu niedrigen Temperaturen führen kann.

Lösungsansatz: Messung der Temperatur über einen Sensor (DS18B20) und Aktivierung der Fernbedienung der Zusatzheizung mittels eines Servos.

Der Code ist in Arduino für den ESP32S3 geschrieben. Der Temperatursensor ist an Pin 4 angeschlossen und wird über die 3,3 V des LDO der ESP-Entwicklungsplatine versorgt. Der Servo ist an Pin 5 angeschlossen und wird mit der Eingangsspannung des LDO versorgt, die entweder über USB beim Debugging oder extern über 5Vin bereitgestellt wird. Für den Betrieb wurden 4 NiMH-Zellen (Eneloop) verwendet. Der durchschnittliche Stromverbrauch liegt bei etwa 70 mA.

Die 3D-gedruckten Teile sind im Projekt enthalten. Sie sind für die Fernbedienung eines Caddy V (2024) und einen Standard-Servo (HK15138) ausgelegt. Die Servo-Positionen für Neutral- und Aktivierungsstellung müssen iterativ bestimmt werden. Das bereitgestellte Programm „servo_set“ kann hierfür hilfreich sein.

Der Hauptcode misst die Temperatur und vergleicht sie mit TEMP_THRESHOLD_LOW_C. Wenn die Temperatur zu niedrig ist, wird der Servo für die Dauer von SERVO_HOLD_DURATION_MS aktiviert. Die Zusatzheizung läuft dann 20 Minuten lang. Je nach Außentemperatur kann das Fahrzeug schnell auskühlen. Um ein Entladen der Fahrzeugbatterie (die die Zusatzheizung speist) zu vermeiden, wird die Heizung erst nach Ablauf von SERVO_COOLDOWN_MS erneut aktiviert. Eine Aktivierung häufiger als alle 2 Stunden wird nicht empfohlen.

Die LED der Entwicklungsplatine zeigt den Status an. Blau/Rot bedeutet, dass die Temperatur unter/über TEMP_THRESHOLD_LOW_C liegt. Gelb zeigt einen Fehler bei der Temperaturmessung an.

